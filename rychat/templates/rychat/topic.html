{% extends "base_generic.html" %}
<!-- Template for an individual thread page. -->

{% block content %}
{% if thread_topic %}
      <h2>{{ thread_topic.title }}</h2>
      <h3>{{ thread_topic.author }} says: </h3>
      <p> {{ thread_topic.text }} </p>
      <ul>
      {% for reply in thread_topic.reply_set.all %}
            <li><h3>{{reply.author}} says:</h3>
                  <p>{{reply.text}}</p>
            </li>
      {% endfor %}
      </ul>

      {% if user.is_authenticated %}
      <div>
      <form action="{% url "rychat:post" thread_topic.id %}" method="post">
            {% csrf_token %}
            <b>Posting as: {{ user.username }}</b><br>
            <label for="replybox">Reply:</label><br>
            <textarea name="message" id="replybox" maxlength="1024"
             placeholder="Your message here..."></textarea><br>

            <input type="submit" value="Post!">
      </form>
      </div>
      {% else %}
      <div>
            <p>Login to reply to this thread.</p>
      </div>
      {% endif %}
{% else %}
      <p>
      This thread does not exist. I do not know how you got to this page.
      </p>
{% endif %}
<a href="{% url 'rychat:index' %}">[Back to Index]</a>

{% endblock %}
